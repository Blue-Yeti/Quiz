<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinguoFocus - Native Learner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; transition: background-color 0.3s; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex flex-col select-none">

    <header class="bg-white border-b border-slate-200 px-8 py-4 flex justify-between items-center shadow-sm sticky top-0 z-50">
        <div class="flex items-center gap-3">
            <div class="bg-indigo-600 p-2 rounded-xl text-white">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
            </div>
            <h1 class="text-xl font-black text-indigo-950 uppercase tracking-tight">LinguoFocus</h1>
        </div>
        <nav class="flex bg-slate-100 p-1 rounded-xl">
            <button id="btn-learn" class="px-6 py-2 rounded-lg font-bold transition-all bg-white shadow text-indigo-600">LEARN</button>
            <button id="btn-quiz" class="px-6 py-2 rounded-lg font-bold transition-all text-slate-500">QUIZ</button>
        </nav>
    </header>

    <main id="app-container" class="flex-grow p-6 flex flex-col items-center justify-center max-w-7xl mx-auto w-full">
        <!-- Content injected by JS -->
    </main>

    <footer class="p-6 text-center text-[10px] font-bold text-slate-400 tracking-[0.3em] uppercase">
        Arrows to Navigate • Spacebar to Replay Audio
    </footer>

    <script>
        // Data
        const VOCABULARY = [
            { id: 1, word: "The Apple", translation: "La Manzana", image: "https://images.unsplash.com/photo-1560806887-1e4cd0b6bcd6?w=800&auto=format&fit=crop", audio: "https://actions.google.com/sounds/v1/foley/crunchy_bite.ogg" },
            { id: 2, word: "The Ocean", translation: "El Océano", image: "https://images.unsplash.com/photo-1505118380757-91f5f45d8de4?w=800&auto=format&fit=crop", audio: "https://actions.google.com/sounds/v1/water/waves_crashing_on_rock.ogg" },
            { id: 3, word: "The Mountain", translation: "La Montaña", image: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=800&auto=format&fit=crop", audio: "https://actions.google.com/sounds/v1/weather/wind_heavy_cold.ogg" },
            { id: 4, word: "The Book", translation: "El Libro", image: "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=800&auto=format&fit=crop", audio: "https://actions.google.com/sounds/v1/office/paper_shuffle.ogg" },
            { id: 5, word: "The Forest", translation: "El Bosque", image: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&auto=format&fit=crop", audio: "https://actions.google.com/sounds/v1/foley/forest_ambience.ogg" },
            { id: 6, word: "The Sun", translation: "El Sol", image: "https://images.unsplash.com/photo-1529693662653-9d480530a697?w=800&auto=format&fit=crop", audio: "https://actions.google.com/sounds/v1/weather/sunny_day_ambience.ogg" },
        ];

        const SUCCESS_SOUND = "https://actions.google.com/sounds/v1/buttons/button_interactive_notification.ogg";
        const ERROR_SOUND = "https://actions.google.com/sounds/v1/buttons/button_negative_feedback.ogg";

        // State
        let currentView = 'learn';
        let currentIndex = 0;
        let score = 0;
        let quizOptions = [];
        let targetWord = null;
        let isFeedbackActive = false;

        const mainAudio = new Audio();
        const feedbackAudio = new Audio();

        // Components
        function render() {
            const container = document.getElementById('app-container');
            container.innerHTML = '';
            
            if (currentView === 'learn') {
                const item = VOCABULARY[currentIndex];
                container.innerHTML = `
                    <div class="w-full max-w-4xl flex flex-col items-center fade-in">
                        <div class="bg-white rounded-[2rem] shadow-2xl overflow-hidden border border-slate-200 flex flex-col md:flex-row w-full min-h-[450px]">
                            <div class="md:w-3/5 bg-slate-200">
                                <img src="${item.image}" class="w-full h-full object-cover">
                            </div>
                            <div class="md:w-2/5 p-10 flex flex-col justify-center items-center text-center">
                                <h2 class="text-4xl font-black text-slate-900 mb-2">${item.word}</h2>
                                <p class="text-xl text-indigo-500 font-bold mb-8 italic">${item.translation}</p>
                                <button id="play-btn" class="w-20 h-20 bg-indigo-600 text-white rounded-full flex items-center justify-center hover:scale-110 active:scale-95 transition-all shadow-xl">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
                                </button>
                            </div>
                        </div>
                        <div class="mt-10 flex items-center gap-8">
                            <button id="prev-btn" class="p-4 bg-white rounded-2xl border-2 border-slate-200 text-slate-400 hover:text-indigo-600 transition-all shadow-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                            </button>
                            <span class="font-black text-xl text-slate-400">${currentIndex + 1} / ${VOCABULARY.length}</span>
                            <button id="next-btn" class="p-4 bg-indigo-600 rounded-2xl text-white shadow-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                            </button>
                        </div>
                    </div>
                `;
                document.getElementById('play-btn').onclick = () => playMainAudio(item.audio);
                document.getElementById('prev-btn').onclick = prevLearn;
                document.getElementById('next-btn').onclick = nextLearn;
            } else {
                container.innerHTML = `
                    <div class="w-full max-w-5xl fade-in">
                        <div class="flex justify-between items-center mb-8 bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                            <h2 class="text-xl font-black uppercase text-slate-700">Listen & Find the Image</h2>
                            <div class="text-right">
                                <span class="text-xs font-bold text-slate-400 uppercase block">Total Score</span>
                                <span class="text-3xl font-black text-indigo-600">${score}</span>
                            </div>
                        </div>
                        <div class="flex justify-center mb-10">
                            <button id="quiz-audio-btn" class="flex items-center gap-4 bg-white border-4 border-indigo-600 text-indigo-600 p-8 rounded-3xl hover:bg-indigo-50 transition-all shadow-xl">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
                                <span class="text-xl font-black uppercase">Play Audio (Space)</span>
                            </button>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4" id="quiz-grid"></div>
                    </div>
                `;
                
                const grid = document.getElementById('quiz-grid');
                quizOptions.forEach(item => {
                    const btn = document.createElement('button');
                    btn.className = "relative aspect-video rounded-3xl overflow-hidden border-4 border-white hover:border-indigo-400 bg-white shadow-lg transition-all active:scale-95";
                    btn.innerHTML = `<img src="${item.image}" class="w-full h-full object-cover">`;
                    btn.onclick = () => handleQuizSelection(item, btn);
                    grid.appendChild(btn);
                });

                document.getElementById('quiz-audio-btn').onclick = () => playMainAudio(targetWord.audio);
            }
        }

        // Logic
        function playMainAudio(url) {
            mainAudio.pause();
            mainAudio.src = url;
            mainAudio.play().catch(e => console.warn("Audio blocked"));
        }

        function playFeedbackAudio(url) {
            feedbackAudio.pause();
            feedbackAudio.src = url;
            feedbackAudio.play().catch(e => console.warn("Audio blocked"));
        }

        function nextLearn() {
            currentIndex = (currentIndex + 1) % VOCABULARY.length;
            render();
            playMainAudio(VOCABULARY[currentIndex].audio);
        }

        function prevLearn() {
            currentIndex = (currentIndex - 1 + VOCABULARY.length) % VOCABULARY.length;
            render();
            playMainAudio(VOCABULARY[currentIndex].audio);
        }

        function setupQuiz() {
            isFeedbackActive = false;
            const shuffled = [...VOCABULARY].sort(() => 0.5 - Math.random());
            quizOptions = shuffled.slice(0, 6);
            targetWord = quizOptions[Math.floor(Math.random() * quizOptions.length)];
            render();
            setTimeout(() => playMainAudio(targetWord.audio), 400);
        }

        function handleQuizSelection(item, btn) {
            if (isFeedbackActive) return;

            if (item.id === targetWord.id) {
                isFeedbackActive = true;
                score++;
                btn.classList.add('border-green-500', 'scale-105', 'z-10');
                btn.innerHTML += `
                    <div class="absolute inset-0 bg-green-500/20 flex items-center justify-center backdrop-blur-sm fade-in">
                        <div class="bg-white p-4 rounded-full text-green-600 shadow-xl">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                        </div>
                    </div>
                `;
                playFeedbackAudio(SUCCESS_SOUND);
                setTimeout(setupQuiz, 1500);
            } else {
                isFeedbackActive = true;
                btn.classList.add('opacity-30', 'grayscale');
                playFeedbackAudio(ERROR_SOUND);
                setTimeout(() => { isFeedbackActive = false; }, 800);
            }
        }

        // Event Listeners
        document.getElementById('btn-learn').onclick = () => {
            currentView = 'learn';
            document.getElementById('btn-learn').classList.add('bg-white', 'shadow', 'text-indigo-600');
            document.getElementById('btn-quiz').classList.remove('bg-white', 'shadow', 'text-indigo-600');
            render();
            playMainAudio(VOCABULARY[currentIndex].audio);
        };

        document.getElementById('btn-quiz').onclick = () => {
            currentView = 'quiz';
            document.getElementById('btn-quiz').classList.add('bg-white', 'shadow', 'text-indigo-600');
            document.getElementById('btn-learn').classList.remove('bg-white', 'shadow', 'text-indigo-600');
            setupQuiz();
        };

        window.addEventListener('keydown', (e) => {
            if (currentView === 'learn') {
                if (e.key === 'ArrowRight') nextLearn();
                if (e.key === 'ArrowLeft') prevLearn();
            }
            if (e.key === ' ') {
                e.preventDefault();
                const audioUrl = currentView === 'learn' ? VOCABULARY[currentIndex].audio : targetWord.audio;
                playMainAudio(audioUrl);
            }
        });

        // Init
        window.onload = () => {
            render();
            // Optional: Start first audio after a user interaction to satisfy browser policies
        };
    </script>
</body>
</html>
